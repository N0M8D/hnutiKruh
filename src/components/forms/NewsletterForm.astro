---
import { Icon } from 'astro-icon/components';
import { Button, FormInput, TextSection } from "@components/odyssey-theme";
import FormCheckbox from "@components/form-fields/FormCheckbox.astro";
---

<div class="newsletter">
  <!-- Stejně jako eventList -->
  <TextSection narrow>
    <div class="">
      <h2>Přihlášení k odběru newsletteru</h2>
      <form name="Newsletter Form" method="POST" action="/api/subscribe">
        <div class="newsletter-form__container">
          <FormInput name="Jmeno" label="Jméno" />
          <FormInput name="Prijmeni" label="Příjmení" />
          <FormInput name="Email" label="Email" placeholder="hello@example.com" required />
                    <Button customIcon fullWidth>
            Přihlásit se k odběru
            <Fragment slot="icon">
              <Icon name="ic:baseline-chevron-right" />
            </Fragment>
          </Button>
          <!-- Nový checkbox pro souhlas se zpracováním -->
          <div class="consent-checkbox">
            <FormCheckbox 
              name="consent" 
              required={true}
              labelHtml="Souhlasím se <a href='/organisation/legal' target='_blank'>zpracováním osobních údajů</a> a zasíláním newsletteru"
            />
             <p class="newsletter-disclaimer">
              *Vaše údaje budou využity výhradně pro zasílání novinek a informací o aktivitách Hnutí Kruh.
            </p>
          </div>
        </div>
        
      </form>
    </div>
  </TextSection>
</div>

<style>
.newsletter {
  margin: 2rem 0;
}

/* Karta s pozadím */
.newsletter-card {
  background-color: var(--theme-surface-1, #fff);
  border-radius: 8px;
  padding: 2rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  width: 100%;
  margin-top: 1rem;
}

/* Grid pro vstupní pole a tlačítko */
.newsletter-form__container {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

/* Checkbox pro souhlas */
.consent-checkbox {
  grid-column: 1 / -1; /* Roztáhne se přes všechny sloupce */
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

/* Popisek (disclaimer) pod formulářem */
.newsletter-disclaimer {
  margin-top: 1rem;
  font-size: 0.875rem; /* menší písmo */
  color: #666;        /* neutrální barva textu */
  line-height: 1.4;
}

@media (min-width: 768px) {
  .newsletter-form__container {
    grid-template-columns: 1fr 1fr;
  }
  /* Email a tlačítko se roztáhnou přes oba sloupce */
  .newsletter-form__container > :nth-child(3),
  .newsletter-form__container > :nth-child(5) { /* Updated index for button */
    grid-column: span 2;
  }
}
</style>
