---
// File: src/pages/index.astro
import { parse, isBefore } from 'date-fns';
import Layout from '../layouts/Page.astro';
import { TextSection, Button, Container, AnnouncementBar, BlogPostsList } from '@components/odyssey-theme';
import EventsList from '../components/sections/EventList.astro';
import Lide from '../components/sections/Lide.astro';
import { Icon } from 'astro-icon/components';
import AnimatedCircle from '../components/animated/AnimatedCircle.astro';
import NewsletterForm from '@components/forms/NewsletterForm.astro';

const seo = {
  title: 'Hnut√≠ Kruh',
  description: 'Hnut√≠ Kruh ‚Äì otev≈ôenost, soudr≈ænost a spolupr√°ce pro f√©rovou politiku',
};

const events = [
  {
    date: '8. 6.',
    description: 'Petiƒçn√≠ st√°nek na V√Ωstavi≈°ti v Praze, 12:30 - 20:00',
    googleMaps: 'https://mapy.com/cs/turisticka?source=coor&id=14.430990164955148%2C50.104393378984774&x=14.4298207&y=50.1055219&z=17'
  },
  {
    date: '13. 6.',
    description: 'Petiƒçn√≠ st√°nek na Hradƒçanech v Praze, 13:00 - 18:00',
    googleMaps: 'https://mapy.com/cs/turisticka?source=coor&id=14.405042474945077%2C50.09398760721191&x=14.4015985&y=50.0930309&z=17'
  },
  {
    date: '20. 6.',
    description: 'Petiƒçn√≠ st√°nek na V√Ωstavi≈°ti v Praze, od 16:00 a≈æ do veƒçera',
    googleMaps: 'https://mapy.com/cs/turisticka?source=coor&id=14.430990164955148%2C50.104393378984774&x=14.4298207&y=50.1055219&z=17'
  },
   /*{
    date: '24. 5.',
    description: 'Soci√°lnƒõ-ekologick√© f√≥rum, 9:00-21:30, Impact Hub Praha',
    googleMaps: 'https://maps.app.goo.gl/H3NuWuiXi4N3rKHV9'
  },
   {
    date: '24. 5.',
    description: 'Petiƒçn√≠ st√°nek u Psychiatrick√© nemocnice Bohnice 11:30 - 16:00',
    googleMaps: 'https://mapy.com/s/bujudakasu'
  },
   {
    date: '25. 5.',
    description: 'Petiƒçn√≠ st√°nek u Psychiatrick√© nemocnice Bohnice 11:30 - 16:00',
    googleMaps: 'https://mapy.com/s/bujudakasu'
  },*/
];

const peopleModules = import.meta.glob('../pages/people/people-list/*.mdx', { eager: true });

const people = Object.values(peopleModules).map((mod: any) => ({
  name: mod.frontmatter.name,
  description: mod.frontmatter.description,
  photo: mod.frontmatter.featuredImage,
  href: mod.url,
  role: mod.frontmatter.role
}));


// Naƒçteme t≈ôi posledn√≠ ƒçl√°nky z blogu
const postModules = import.meta.glob('../pages/blog/posts/*.mdx', { eager: true });

const posts = Object.values(postModules)
  .map((mod: any) => ({
    title: mod.frontmatter.title,
    description: mod.frontmatter.description,
    authors: mod.frontmatter.authors,
    publishDate: parse(mod.frontmatter.publishDate, 'dd.MM.yyyy', new Date()),
    featuredImage: mod.frontmatter.featuredImage,
    excerpt: mod.frontmatter.excerpt,
    href: mod.url
  }))
  .sort((a, b) => {
    if (isBefore(a.publishDate, b.publishDate)) return 1;
    if (isBefore(b.publishDate, a.publishDate)) return -1;
    return 0;
  })
  .slice(0, 3);

---

<Layout {seo}>

<!-- Banner -->
<section class="banner">
  <img src="/assets/brand/sukynky_short.png" alt="banner" />
</section>

<div class="background-circles">
<AnimatedCircle direction="left" offset="75%" delay="0.4s" depth="-15px" />
<AnimatedCircle direction="right" offset="150%" delay="1s"depth="10px" image="/assets/brand/kolo+.png" />
</div>

    <!-- Posledn√≠ ƒçl√°nky -->
  <section class="clanky">
    <TextSection narrow>
      <h2 id="clanky">Aktuality</h2>
      <BlogPostsList posts={posts} />
      <Button href="./blog" newTab fullWidth>
        V√≠ce ƒçl√°nk≈Ø
      </Button>
    </TextSection>
  </section>

    <!-- Akce -->
  <section class="akce">
    <TextSection narrow>
      <h2 id="akce">Kde n√°s m≈Ø≈æete potkat</h2>
      <EventsList events={events} />
    </TextSection>
  </section>

  <!-- Manifest -->
  <section class="manifest">
    <TextSection narrow>
      <h1 hidden>HNUT√ç KRUH</h1>
      
      <h2 id="manifest">Manifest</h2>
      <p><strong>Otev≈ôenost, soudr≈ænost a spolupr√°ce</strong></p>
      <p>
        Spojujeme sv√© s√≠ly ve jm√©nu hodnot f√©rov√© politiky tvo≈ôen√© v≈°emi a pro v≈°echny. Chceme spoleƒçnost zalo≈æenou na spolupr√°ci, p≈ô√≠mosti a poctivosti. Vytv√°≈ô√≠me politick√Ω syst√©m, kter√Ω zajist√≠ dobr√Ω ≈æivot, beze strachu o budoucnost, n√°m v≈°em.
      </p>
      <div class="boxes">
        <div class="box">
          Vƒõ≈ô√≠me ve svƒõt, kde m√° ka≈æd√Ω f√©rovou ≈°anci uspƒõt a nikdo netrp√≠ jen proto, ≈æe se spr√°vnƒõ nenarodil. Pr√°ce a p≈ô√≠nos mus√≠ b√Ωt n√°le≈æitƒõ ocenƒõny. Odm√≠t√°me √∫spƒõch na √∫kor druh√Ωch. Usilujeme o <strong>spravedliv√© podm√≠nky a rovn√© p≈ô√≠le≈æitosti.</strong>
        </div>
        <div class="box">
          Stav√≠me se proti koncentraci moci v rukou vyvolen√Ωch. Po≈æadujeme transparentn√≠ rozhodov√°n√≠ politik≈Ø. O budoucnosti mus√≠me rozhodovat spoleƒçnƒõ. Prosazujeme <strong>odpovƒõdnost a otev≈ôenost.</strong>
        </div>
        <div class="box">
          Chceme f√©rov√Ω da≈àov√Ω syst√©m, kter√Ω podporuje d≈Østojn√Ω ≈æivot. Danit se maj√≠ astronomick√© zisky, ne prospƒõ≈°n√° pr√°ce obyƒçejn√Ωch lid√≠. Danƒõ jsou na≈°e <strong>investice do budoucnosti.</strong>
        </div>
        <div class="box">
          V√≠me, ≈æe <strong>spoleƒçnost prosp√≠v√° ze spolupr√°ce.</strong> Chr√°n√≠me voln√Ω p≈ô√≠stup ke spoleƒçn√© debatƒõ za spoleƒçn√Ωm c√≠lem. Oce≈àujeme rozd√≠ln√© pohledy a odli≈°n√© zku≈°enosti. To p≈ôin√°≈°√≠ nejlep≈°√≠ v√Ωsledky pro celek i do budoucna.
        </div>
        <div class="box">
          Stoj√≠me na stranƒõ tƒõch, kdo se nemohou br√°nit sami. Pom√°h√°me r≈Øst ‚Äì jedinc≈Øm, i celku. Na≈°e s√≠la vych√°z√≠ ze vz√°jemn√© d≈Øvƒõry a podpory. <strong>Prosazujeme solidaritu, soun√°le≈æitost a empatii.</strong>
        </div>
        <div class="box">
          Stoj√≠me pevnƒõ za sv√Ωmi n√°zory, ale v≈ædy s respektem a ochotou vedeme vƒõcnou diskusi. <strong>Jsme odv√°≈æn√© a m√°me svou hrdost.</strong>
        </div>
      </div>
      <p><strong>Tento manifest je v√Ωzvou v≈°em, kdo sd√≠l√≠ na≈°e hodnoty.</strong></p>

      <Button href="/assets/docs/manifestA2.pdf" newTab fullWidth>
        üìÑ St√°hnout Manifest
      </Button>
    </TextSection>

  </section>
  


  <!-- Petice -->
  <section class="petice">
    <TextSection narrow>
      <h2 id="petice">Petice</h2>
      <p>Chcete n√°m pomoci sehnat 1000 podpis≈Ø, kter√© pot≈ôebujeme pro registraci hnut√≠?</p>
      <p>
        St√°hnƒõte si petici, sb√≠rejte podpisy sv√Ωch zn√°m√Ωch a petici n√°m doruƒçte na nƒõkterou z adres ƒçlenek petiƒçn√≠ho v√Ωboru:
      </p>

      <ul class="petice-adresy">
        <li>
          <strong>Marta Martinov√°</strong><br />
          <Icon name="mdi:local-post-office" width={20} height={20} style="vertical-align: middle;" /> Pod Sokolovnou 252, 28921 Kostomlaty nad Labem
        </li>
        <li>
          <strong>Jana Kol√°≈ô√≠kov√°</strong><br />
          <Icon name="mdi:local-post-office" width={20} height={20} style="vertical-align: middle;" /> N√°dra≈æn√≠ 137, 387 11 Katovice 
        </li>
        <li>
          <strong>Kl√°ra Kad√°r</strong><br />
          <Icon name="mdi:local-post-office" width={20} height={20} style="vertical-align: middle;" /> Tere≈°ov 17, 338 08 Tere≈°ov
        </li>
      </ul>

      <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 1.5rem;">
        <Button href="/assets/docs/petice.pdf" newTab>
          üìÑ ST√ÅHNOUT PETICI
        </Button>
        <Button href="https://docs.google.com/forms/d/e/1FAIpQLSd7p3jaKfurl3mDHXh1ztL00cXLgbW4LoBOB1F8SYBV93X-nA/viewform" newTab>
          ‚úçÔ∏è CHCI PODEPSAT
        </Button>
      </div>
      
    </TextSection>
  </section>


  <!-- Lid√© -->
   <section class="lide-section">
    <TextSection narrow>
      <h2 id="lide">Na≈°e tv√°≈ôe</h2>
      <Lide people={people} />
    </TextSection>
  </section>
  

  <NewsletterForm/>


</Layout>

<style>

  .banner {
    text-align: center;
  }
  .banner img {
    max-width: 100%;
    height: auto;
  }

  .manifest {
  position: relative;
  margin: 2rem 0;
  z-index: 1;
}
  .manifest .boxes {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin: 1rem 0;
  }
  .manifest .box {
    background-color: var(--theme-surface-1, #f2f2f2);
    padding: 1rem;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  .petice {
    position: relative;
    margin: 2rem 0;
    z-index: 1;
  }
  .petice a {
    color: var(--theme-primary, #333);
    text-decoration: none;
    font-weight: 600;
  }

  .petice-adresy {
    margin-top: 1rem;
    padding-left: 1.5rem;
    list-style-type: disc;
    color: #444;
  }

  .petice-adresy li {
    margin-bottom: 0.75rem;
  }

  .akce {
    margin: 2rem 0;
    position: relative;
    overflow: hidden; /* p≈ôid√°no */
    margin: 2rem 0;
    z-index: 1;
  }
  .akce ul {
    list-style: disc;
    padding-left: 2rem;
  }
  .akce li {
    margin-bottom: 0.5rem;
  }

  .lide-section {
    margin: 2rem 0;
  }
</style>
