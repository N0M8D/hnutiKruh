---
// File: src/pages/index.astro
import { parse, isBefore } from 'date-fns';
import Layout from '../layouts/Page.astro';
import { TextSection, Button, Container, AnnouncementBar, BlogPostsList } from '@components/odyssey-theme';
import EventsList from '../components/sections/EventList.astro';
import Lide from '../components/sections/Lide.astro';
import { Icon } from 'astro-icon/components';
import AnimatedCircle from '../components/animated/AnimatedCircle.astro';
import NewsletterForm from '@components/forms/NewsletterForm.astro';

const seo = {
  title: 'Hnut√≠ Kruh',
  description: 'Hnut√≠ Kruh ‚Äì otev≈ôenost, soudr≈ænost a spolupr√°ce pro f√©rovou politiku',
};

const events = [
  {
    date: '',
    description: "Aktu√°lnƒõ nejsou pl√°novan√© ≈æ√°dn√© akce.",
  }
   /*{
    date: '24. 5.',
    description: 'Soci√°lnƒõ-ekologick√© f√≥rum, 9:00-21:30, Impact Hub Praha',
    googleMaps: 'https://maps.app.goo.gl/H3NuWuiXi4N3rKHV9'
  },
   {
    date: '24. 5.',
    description: 'Petiƒçn√≠ st√°nek u Psychiatrick√© nemocnice Bohnice 11:30 - 16:00',
    googleMaps: 'https://mapy.com/s/bujudakasu'
  },
   {
    date: '25. 5.',
    description: 'Petiƒçn√≠ st√°nek u Psychiatrick√© nemocnice Bohnice 11:30 - 16:00',
    googleMaps: 'https://mapy.com/s/bujudakasu'
  },*/
];

const peopleModules = import.meta.glob('../pages/people/people-list/*.mdx', { eager: true });

const people = Object.values(peopleModules).map((mod: any) => ({
  name: mod.frontmatter.name,
  description: mod.frontmatter.description,
  photo: mod.frontmatter.featuredImage,
  href: mod.url,
  role: mod.frontmatter.role
}));


// Naƒçteme t≈ôi posledn√≠ ƒçl√°nky z blogu
const postModules = import.meta.glob('../pages/blog/posts/*.mdx', { eager: true });

const posts = Object.values(postModules)
  .map((mod: any) => ({
    title: mod.frontmatter.title,
    description: mod.frontmatter.description,
    authors: mod.frontmatter.authors,
    publishDate: parse(mod.frontmatter.publishDate, 'dd.MM.yyyy', new Date()),
    featuredImage: mod.frontmatter.featuredImage,
    excerpt: mod.frontmatter.excerpt,
    href: mod.url
  }))
  .sort((a, b) => {
    if (isBefore(a.publishDate, b.publishDate)) return 1;
    if (isBefore(b.publishDate, a.publishDate)) return -1;
    return 0;
  })
  .slice(0, 3);

---

<Layout {seo}>

<div class="logo-glow-wrapper">
  <div class="logo-glow"></div>
  <img src="/assets/brand/kruh_png_logo.png" alt="Hnut√≠ Kruh logo" class="landing-logo" />
</div>
<!-- Banner -->
{/*<div class="banner">
  <img src="/assets/brand/sukynky_short.png" alt="banner" />
</div> */}

{/* <div class="background-circles">
<AnimatedCircle direction="left" offset="75%" delay="0.4s" depth="-15px" />
<AnimatedCircle direction="right" offset="150%" delay="1s"depth="10px" image="/assets/brand/kolo+.png" />
</div>*/}

    <!-- Posledn√≠ ƒçl√°nky -->
  <div class="clanky">
    <TextSection narrow>
      <h2 id="clanky">Aktuality</h2>
      <BlogPostsList posts={posts} />
      <Button href="./blog" newTab fullWidth>
        V√≠ce ƒçl√°nk≈Ø
      </Button>
    </TextSection>
  </div>

    <!-- Akce -->
  <div class="akce">
    <TextSection narrow>
      <h2 id="akce">Kde n√°s m≈Ø≈æete potkat</h2>
      <EventsList events={events} />
    </TextSection>
  </div>

  


  <!-- Petice -->
  <div class="petice">
    <TextSection narrow>
      <h2 id="petice">Petice</h2>
      <p>Chcete n√°m pomoci sehnat 1000 podpis≈Ø, kter√© pot≈ôebujeme pro registraci hnut√≠?</p>
      <p>
        St√°hnƒõte si petici, sb√≠rejte podpisy sv√Ωch zn√°m√Ωch a petici n√°m doruƒçte na nƒõkterou z adres ƒçlenek petiƒçn√≠ho v√Ωboru:
      </p>

      <ul class="petice-adresy">
        <li>
          <strong>Marta Martinov√°</strong><br />
          <Icon name="mdi:local-post-office" width={20} height={20} style="vertical-align: middle;" /> Pod Sokolovnou 252, 28921 Kostomlaty nad Labem
        </li>
        <li>
          <strong>Jana Kol√°≈ô√≠kov√°</strong><br />
          <Icon name="mdi:local-post-office" width={20} height={20} style="vertical-align: middle;" /> N√°dra≈æn√≠ 137, 387 11 Katovice 
        </li>
        <li>
          <strong>Kl√°ra Kad√°r</strong><br />
          <Icon name="mdi:local-post-office" width={20} height={20} style="vertical-align: middle;" /> Tere≈°ov 17, 338 08 Tere≈°ov
        </li>
      </ul>

      <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 1.5rem;">
        <Button href="/assets/docs/petice.pdf" newTab>
          üìÑ ST√ÅHNOUT PETICI
        </Button>
        <Button href="https://docs.google.com/forms/d/e/1FAIpQLSd7p3jaKfurl3mDHXh1ztL00cXLgbW4LoBOB1F8SYBV93X-nA/viewform" newTab>
          ‚úçÔ∏è CHCI PODEPSAT
        </Button>
      </div>
      
    </TextSection>
  </div>


  <!-- Lid√© -->
   <div class="lide-div">
    <TextSection narrow>
      <h2 id="lide">Na≈°e tv√°≈ôe</h2>
      <Lide people={people} />
    </TextSection>
  </div>
  

  <NewsletterForm/>


</Layout>

<style>

  .banner {
    text-align: center;
  }
  .banner img {
    max-width: 100%;
    height: auto;
  }



  .petice {
    position: relative;
    margin: 2rem 0;
    z-index: 1;
  }
  .petice a {
    color: var(--theme-primary, #333);
    text-decoration: none;
    font-weight: 600;
  }

  .petice-adresy {
    margin-top: 1rem;
    padding-left: 1.5rem;
    list-style-type: disc;
    color: #444;
  }

  .petice-adresy li {
    margin-bottom: 0.75rem;
  }

  .akce {
    margin: 2rem 0;
    position: relative;
    margin: 2rem 0;
    z-index: 1;
  }
  .akce ul {
    list-style: disc;
    padding-left: 2rem;
  }
  .akce li {
    margin-bottom: 0.5rem;
  }

  .lide-div {
    margin: 2rem 0;
  }

.logo-glow-wrapper {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0.1rem auto -5rem auto;
  width: 100%;
  max-width: 700px;
  height: 340px;
}

.landing-logo {
  position: relative;
  z-index: 1; /* logo nad z√°≈ô√≠ */
  width: 220px;
  height: 220px;
  border-radius: 50%;
  display: block;
  background: transparent;
}

.logo-glow {
  position: absolute;
  z-index: 0; /* z√°≈ôe pod logem */
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 900px;
  height: 500px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 1;
  background: radial-gradient(
    ellipse at center,
    rgba(255,128,160,0.18) 0%,
    rgba(255,128,128,0.10) 40%,
    rgba(255,230,213,0.04) 70%,
    rgba(255,255,255,0.01) 100%
  );
  filter: blur(18px);
  opacity: 0;
  animation: logo-glow-pulse 4.2s infinite;
}

@keyframes logo-glow-pulse {
  0% {
    opacity: 0;
    filter: blur(6px);
  }
  70% {
    opacity: 0;
    filter: blur(6px);
  }
  75% {
    opacity: 1;
    filter: blur(16px);
  }
  80% {
    opacity: 0.6;
    filter: blur(10px);
  }
  85% {
    opacity: 1;
    filter: blur(16px);
  }
  100% {
    opacity: 0;
    filter: blur(6px);
  }
}
</style>
